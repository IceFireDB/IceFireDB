<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Network layer design # The network layer undertakes the work of inter-node networking, inter-node data distribution, and inter-node data consistency consensus. The network layer of IceFireDB is divided into two layers according to the distance of the physical network link:
Data consistency network layer for short-distance networks. Decentralized database network layer for wide-distance network. The above two different network layers are supported by different technologies and have different requirements for data consistency sensitivity and timeliness."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:type" content="website"><meta property="og:image" content="https://res.cloudinary.com/malloc/image/upload/v1666510486/icefiredb/logo_z8koem.png"><meta property="og:title" content="Network layer"><meta property="og:description" content="Network layer design # The network layer undertakes the work of inter-node networking, inter-node data distribution, and inter-node data consistency consensus. The network layer of IceFireDB is divided into two layers according to the distance of the physical network link:
Data consistency network layer for short-distance networks. Decentralized database network layer for wide-distance network. The above two different network layers are supported by different technologies and have different requirements for data consistency sensitivity and timeliness."><meta property="og:type" content="article"><meta property="og:url" content="https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-nosql/designs/network/"><meta property="article:section" content="IceFireDB"><title>Network layer | IceFireDB Documentation</title><link rel=manifest href=/icefiredb_docs/manifest.json><link rel=icon href=/icefiredb_docs/favicon.ico type=image/x-icon><link rel=stylesheet href=/icefiredb_docs/book.min.46181bc93375ba932026e753b37c40e6ff8bb16a9ef770c78bcc663e4577b1ba.css integrity="sha256-RhgbyTN1upMgJudTs3xA5v+LsWqe93DHi8xmPkV3sbo=" crossorigin=anonymous><script defer src=/icefiredb_docs/flexsearch.min.js></script>
<script defer src=/icefiredb_docs/en.search.min.6d1e8664bf52aa061ff8f52ed8fbf0924b12a5f8743d1947e84f3bccf6f340f7.js integrity="sha256-bR6GZL9SqgYf+PUu2PvwkksSpfh0PRlH6E87zPbzQPc=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/icefiredb_docs/><span>IceFireDB Documentation</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=https://www.icefiredb.xyz/ target=_blank rel=noopener>Official Site</a></li><li><a href=https://github.com/icefiredb target=_blank rel=noopener>Open Source</a></li></ul><ul><li class=book-section-flat><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/>Overview</a><ul><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/engine_overview/>Engine Overview</a><ul></ul></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/vocabulary/>Vocabulary</a><ul></ul></li><li><span>IceFireDB-NoSQL</span><ul><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-nosql/quick_start/>Quick Start</a><ul></ul></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-nosql/designs/>Designs</a><ul><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-nosql/designs/network/ class=active>Network layer</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-nosql/designs/storage/>Storage layer</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-nosql/designs/protocol/>Protocol layer</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-nosql/designs/codec/>Codec layer</a></li></ul></li><li><span>Develop</span><ul><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-nosql/develop/icefiredb-crdt-kv/>icefiredb-crdt-kv</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-nosql/develop/icefiredb-ipfs-log/>icefiredb-ipfs-log</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-nosql/develop/icefiredb_proxy/>icefiredb-proxy</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-nosql/develop/redhub/>redhub-frame</a></li></ul></li><li><span>Project Comparison</span><ul><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-nosql/project-comparison/orbitdb/>OrbitDB</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-nosql/project-comparison/threaddb/>ThreadDB</a></li></ul></li></ul></li><li><span>IceFireDB-SQLite</span><ul><li><input type=checkbox id=section-9a14413c81006dc1ffda9fa39f8e6bac class=toggle>
<label for=section-9a14413c81006dc1ffda9fa39f8e6bac class="flex justify-between"><a role=button>Architecture</a></label><ul><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-sqlite/architecture/overview/>OverView</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-sqlite/architecture/network/>NetWork</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-sqlite/architecture/storage/>Storage</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-sqlite/architecture/protocol/>Protocol</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-sqlite/architecture/codec/>Codec</a></li></ul></li></ul></li><li><span>IceFireDB-Redis-Proxy</span><ul><li><input type=checkbox id=section-3bf1c87fb952709c4563285ca0f995a6 class=toggle>
<label for=section-3bf1c87fb952709c4563285ca0f995a6 class="flex justify-between"><a role=button>Architecture</a></label><ul><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-redis-proxy/architecture/overview/>OverView</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-redis-proxy/architecture/network/>NetWork</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-redis-proxy/architecture/storage/>Storage</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-redis-proxy/architecture/protocol/>Protocol</a></li></ul></li></ul></li><li><span>IceFireDB-SQLProxy</span><ul><li><input type=checkbox id=section-fffdb9e9ea7862273e9c9ce0d60c9801 class=toggle>
<label for=section-fffdb9e9ea7862273e9c9ce0d60c9801 class="flex justify-between"><a role=button>Architecture</a></label><ul><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-sqlproxy/architecture/overview/>OverView</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-sqlproxy/architecture/network/>NetWork</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-sqlproxy/architecture/storage/>Storage</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-sqlproxy/architecture/protocol/>Protocol</a></li></ul></li></ul></li><li><span>IceFireDB-PubSub</span><ul><li><input type=checkbox id=section-ef1f7256f510a0aabdfc342eef0e3348 class=toggle>
<label for=section-ef1f7256f510a0aabdfc342eef0e3348 class="flex justify-between"><a role=button>Architecture</a></label><ul><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-pubsub/architecture/overview/>OverView</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-pubsub/architecture/network/>NetWork</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-pubsub/architecture/storage/>Storage</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-pubsub/architecture/protocol/>Protocol</a></li></ul></li></ul></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/faqs/>FAQs</a><ul></ul></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/icefiredb_docs/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Network layer</strong>
<label for=toc-control><img src=/icefiredb_docs/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#parallel-cluster-network>Parallel cluster network</a></li><li><a href=#decentralized-network>Decentralized network</a></li><li><a href=#decentralized-log-synchronization-network>Decentralized log synchronization network</a></li><li><a href=#icegiant-network-structure>IceGiant Network structure</a></li><li><a href=#in-process-network-io-model>In-process network IO model</a></li></ul></nav></aside></header><article class=markdown><h1 id=network-layer-design>Network layer design
<a class=anchor href=#network-layer-design>#</a></h1><p>The network layer undertakes the work of inter-node networking, inter-node data distribution, and inter-node data consistency consensus. The network layer of IceFireDB is divided into two layers according to the distance of the physical network link:</p><ol><li>Data consistency network layer for short-distance networks.</li><li>Decentralized database network layer for wide-distance network.</li></ol><p>The above two different network layers are supported by different technologies and have different requirements for data consistency sensitivity and timeliness.</p><h2 id=parallel-cluster-network>Parallel cluster network
<a class=anchor href=#parallel-cluster-network>#</a></h2><p>The smallest component unit of the IceFireDB network cluster is a parallel cluster network guaranteed by the RAFT algorithm, rather than a decentralized P2P network.</p><center><img width=363 alt=image src=https://res.cloudinary.com/malloc/image/upload/v1669042234/icefiredb/docs/203081181-b478f516-9a00-484f-88a9-95e1ae6df497_yzzuvz.png></center><p>The IceFireDB parallel cluster uses the RAFT algorithm to form a data consistency layer. Each cluster has a master and multiple slave nodes. They synchronize with each other and maintain the master-slave state of the cluster. Each node stores the same data and writes data. The input is undertaken by the master node, and the master node is responsible for distributing data to the slave nodes. A RAFT cluster internally guarantees the consistency of each data write.</p><h2 id=decentralized-network>Decentralized network
<a class=anchor href=#decentralized-network>#</a></h2><p>The data jumps out of the parallel cluster network and enters the decentralized network. The IceFireDB decentralized network mainly uses P2P technology for automatic networking, and relies on the P2P PubSub communication method to synchronize data commands.</p><center><img width=500 alt=image src=https://res.cloudinary.com/malloc/image/upload/v1669042831/icefiredb/docs/203086379-56f1f632-aea7-459a-8621-d3add6565f4b_d4uv8g.png></center><p>IceFireDB&rsquo;s use of P2P networking is not only in node discovery, but also provides users with decentralized publish and subscribe middleware by bridging the PubSub network to the RESP protocol. Increase the decentralization capability of the SQLite database by bridging the PubSub network to the SQL protocol.</p><h2 id=decentralized-log-synchronization-network>Decentralized log synchronization network
<a class=anchor href=#decentralized-log-synchronization-network>#</a></h2><p>Relying solely on P2P and PubSub technologies cannot meet the database requirements for data decentralized synchronization and decentralized data consistency.The current popular CRDT technology can meet the final data consistency, but it cannot guarantee the synchronization order of the data, so it will castrate some data instruction functions of IceFireDB-NoSQL, and the IPFS-LOG technology very well makes up for the functional gap of the decentralized log.</p><center><img width=850 alt=image src=https://res.cloudinary.com/malloc/image/upload/v1666341372/icefiredb/docs/197144174-9f2f400f-5c6d-4ee0-9cfe-5e725dcb179e_sorguc.png></center><p>IceFireDB-NoSQL has established a decentralized log synchronization network based on IPFS-LOG technology. The decentralized IceFireDB nodes broadcast database command logs and build orderly logs to complete the function of data decentralization and consistency.</p><h2 id=icegiant-network-structure>IceGiant Network structure
<a class=anchor href=#icegiant-network-structure>#</a></h2><p>IceFireDB&rsquo;s RAFT has exactly the same data set within the same group of nodes, and in a larger network, we are providing the IceGiant network structure, which aims to break up different tenant database data.</p><center><img width=550 alt=image src=https://res.cloudinary.com/malloc/image/upload/v1669088778/icefiredb/docs/203216071-d55e6878-2c9f-44c2-9fda-e78062f5815f_dr8s8c.png></center><p>Although all IceGiant nodes are in the same P2P network, the structure of the network can be decomposed according to the data set, which is the data tenant isolation area, which refers to the database area used by a specific application on top of the IceGiant protocol. Different from the traditional blockchain network, IceGiant nodes are only responsible for interacting with peers operating the same data set, and are not responsible for any data of other data sets. Peer IceGiant node sets form a high-availability data storage area.</p><h2 id=in-process-network-io-model>In-process network IO model
<a class=anchor href=#in-process-network-io-model>#</a></h2><p>IceFireDB supports the following two IO models:</p><ol><li><p><strong>Golang classic netpoll model</strong>: goroutine-per-connection, suitable for situations where the number of connections is not a bottleneck.</p></li><li><p><strong>RawEpoll model</strong>: that is, Reactor mode, I/O multiplexing (I/O multiplexing) + non-blocking I/O (non-blocking I/O) mode. For scenarios where there are a large number of long links between the access layer and the gateway, it is more suitable for the RawEpoll model.</p></li></ol></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#parallel-cluster-network>Parallel cluster network</a></li><li><a href=#decentralized-network>Decentralized network</a></li><li><a href=#decentralized-log-synchronization-network>Decentralized log synchronization network</a></li><li><a href=#icegiant-network-structure>IceGiant Network structure</a></li><li><a href=#in-process-network-io-model>In-process network IO model</a></li></ul></nav></div></aside></main></body></html>