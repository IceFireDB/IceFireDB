<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="System Design # In order to build a decentralized database, the core of the IceFireDB system is to provide data decentralization and immutability for applications. Aiming at the above goals, we have designed the following core system levels.
+-+---------------+----+---------------+----+---------------+-+ | Transport | | +---------------+ +---------------+ +---------------+ | | | Cluster | | Cluster | | Cluster | | | | communication | | communication | | communication | | | +---------------+ +---------------+ +---------------+ | +-+---------------+----+-------^-------+----+---------------+-+ | +------------------------------v------------------------------+ | Query Processor | | +-----------------------------------------------------+ | | | Query Parser | | | +-----------------------------------------------------+ | | +-----------------------------------------------------+ | | | Query Optimizer | | | +-----------------------------------------------------+ | +---+--------------------------+--------------------------+---+ | +------------------------------v------------------------------+ | Codec | | +-----------+ +-----------+ | | | Encode | | Decode | | | +-----------+ +-----------+ | | support: kv、list、hash、set | +----------+---------------------------------------^----------+ | | +----------+---------------------------------------+----------+ | |put KV Engine |Get | | +-----v----+ +-----+----+ | | | put(a,b) | | Get(a) | | | +-----+----+ +-----+----+ | | | a:b +-------+ | a | | +-----v----+ +------> store <----+ +-----v----+ | | | CID(b) +----+ +-------+ +---+ cat(hash)| | | +-----+----+ +-----+----+ | | | add(b) | cat | | --------v---------------------------------------v----- | | Leveldb\Badger\OSS\IPFS\CRDT\IPFS-LOG | +-------------------------------------------------------------+ At the above system level, IceFireDB refines and implements the following important system components."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:type" content="website"><meta property="og:image" content="https://res.cloudinary.com/malloc/image/upload/v1666510486/icefiredb/logo_z8koem.png"><meta property="og:title" content="Designs"><meta property="og:description" content="Building global database infrastructure for web2 and web3"><meta property="og:type" content="website"><meta property="og:url" content="https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-nosql/designs/"><title>Designs | IceFireDB Documentation</title><link rel=manifest href=/icefiredb_docs/manifest.json><link rel=icon href=/icefiredb_docs/favicon.ico type=image/x-icon><link rel=stylesheet href=/icefiredb_docs/book.min.46181bc93375ba932026e753b37c40e6ff8bb16a9ef770c78bcc663e4577b1ba.css integrity="sha256-RhgbyTN1upMgJudTs3xA5v+LsWqe93DHi8xmPkV3sbo=" crossorigin=anonymous><script defer src=/icefiredb_docs/flexsearch.min.js></script>
<script defer src=/icefiredb_docs/en.search.min.1dce6fdce02ce68396e16ef1b3405bcbff1a237ddfb261039509b3b02abfaaa7.js integrity="sha256-Hc5v3OAs5oOW4W7xs0Bby/8aI33fsmEDlQmzsCq/qqc=" crossorigin=anonymous></script>
<link rel=alternate type=application/rss+xml href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-nosql/designs/index.xml title="IceFireDB Documentation"></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/icefiredb_docs/><span>IceFireDB Documentation</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=https://www.icefiredb.xyz/ target=_blank rel=noopener>Official Site</a></li><li><a href=https://github.com/icefiredb target=_blank rel=noopener>Open Source</a></li></ul><ul><li class=book-section-flat><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/>Overview</a><ul><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/engine_overview/>Engine Overview</a><ul></ul></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/vocabulary/>Vocabulary</a><ul></ul></li><li><span>IceFireDB-NoSQL</span><ul><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-nosql/quick_start/>Quick Start</a><ul></ul></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-nosql/designs/ class=active>Designs</a><ul><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-nosql/designs/network/>Network layer</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-nosql/designs/storage/>Storage layer</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-nosql/designs/protocol/>Protocol layer</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-nosql/designs/codec/>Codec layer</a></li></ul></li><li><span>Develop</span><ul><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-nosql/develop/icefiredb-crdt-kv/>icefiredb-crdt-kv</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-nosql/develop/icefiredb-ipfs-log/>icefiredb-ipfs-log</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-nosql/develop/icefiredb_proxy/>icefiredb-proxy</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-nosql/develop/redhub/>redhub-frame</a></li></ul></li><li><span>Project Comparison</span><ul><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-nosql/project-comparison/orbitdb/>OrbitDB</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-nosql/project-comparison/threaddb/>ThreadDB</a></li></ul></li></ul></li><li><span>IceFireDB-SQLite</span><ul><li><input type=checkbox id=section-9a14413c81006dc1ffda9fa39f8e6bac class=toggle>
<label for=section-9a14413c81006dc1ffda9fa39f8e6bac class="flex justify-between"><a role=button>Architecture</a></label><ul><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-sqlite/architecture/overview/>OverView</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-sqlite/architecture/network/>NetWork</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-sqlite/architecture/storage/>Storage</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-sqlite/architecture/protocol/>Protocol</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-sqlite/architecture/codec/>Codec</a></li></ul></li></ul></li><li><span>IceFireDB-Redis-Proxy</span><ul><li><input type=checkbox id=section-3bf1c87fb952709c4563285ca0f995a6 class=toggle>
<label for=section-3bf1c87fb952709c4563285ca0f995a6 class="flex justify-between"><a role=button>Architecture</a></label><ul><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-redis-proxy/architecture/overview/>OverView</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-redis-proxy/architecture/network/>NetWork</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-redis-proxy/architecture/storage/>Storage</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-redis-proxy/architecture/protocol/>Protocol</a></li></ul></li></ul></li><li><span>IceFireDB-SQLProxy</span><ul><li><input type=checkbox id=section-fffdb9e9ea7862273e9c9ce0d60c9801 class=toggle>
<label for=section-fffdb9e9ea7862273e9c9ce0d60c9801 class="flex justify-between"><a role=button>Architecture</a></label><ul><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-sqlproxy/architecture/overview/>OverView</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-sqlproxy/architecture/network/>NetWork</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-sqlproxy/architecture/storage/>Storage</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-sqlproxy/architecture/protocol/>Protocol</a></li></ul></li></ul></li><li><span>IceFireDB-PubSub</span><ul><li><input type=checkbox id=section-ef1f7256f510a0aabdfc342eef0e3348 class=toggle>
<label for=section-ef1f7256f510a0aabdfc342eef0e3348 class="flex justify-between"><a role=button>Architecture</a></label><ul><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-pubsub/architecture/overview/>OverView</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-pubsub/architecture/network/>NetWork</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-pubsub/architecture/storage/>Storage</a></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/icefiredb-pubsub/architecture/protocol/>Protocol</a></li></ul></li></ul></li><li><a href=https://www.icefiredb.xyz/icefiredb_docs/icefiredb/faqs/>FAQs</a><ul></ul></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/icefiredb_docs/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Designs</strong>
<label for=toc-control><img src=/icefiredb_docs/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents></nav></aside></header><article class=markdown><h1 id=system-design>System Design
<a class=anchor href=#system-design>#</a></h1><p>In order to build a decentralized database, the core of the IceFireDB system is to provide data decentralization and immutability for applications. Aiming at the above goals, we have designed the following core system levels.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>+-+---------------+----+---------------+----+---------------+-+
</span></span><span style=display:flex><span>|                           Transport                         |
</span></span><span style=display:flex><span>| +---------------+    +---------------+    +---------------+ |
</span></span><span style=display:flex><span>| |    Cluster    |    |    Cluster    |    |    Cluster    | |
</span></span><span style=display:flex><span>| | communication |    | communication |    | communication | |
</span></span><span style=display:flex><span>| +---------------+    +---------------+    +---------------+ |
</span></span><span style=display:flex><span>+-+---------------+----+-------^-------+----+---------------+-+
</span></span><span style=display:flex><span>                               |
</span></span><span style=display:flex><span>+------------------------------v------------------------------+
</span></span><span style=display:flex><span>|                        Query Processor                      |
</span></span><span style=display:flex><span>|   +-----------------------------------------------------+   |
</span></span><span style=display:flex><span>|   |                     Query Parser                    |   |
</span></span><span style=display:flex><span>|   +-----------------------------------------------------+   |
</span></span><span style=display:flex><span>|   +-----------------------------------------------------+   |
</span></span><span style=display:flex><span>|   |                   Query Optimizer                   |   |
</span></span><span style=display:flex><span>|   +-----------------------------------------------------+   |
</span></span><span style=display:flex><span>+---+--------------------------+--------------------------+---+
</span></span><span style=display:flex><span>                               |
</span></span><span style=display:flex><span>+------------------------------v------------------------------+
</span></span><span style=display:flex><span>|                            Codec                            |
</span></span><span style=display:flex><span>|    +-----------+                           +-----------+    |
</span></span><span style=display:flex><span>|    |   Encode  |                           |   Decode  |    |
</span></span><span style=display:flex><span>|    +-----------+                           +-----------+    |
</span></span><span style=display:flex><span>|                 support: kv、list、hash、set                 |
</span></span><span style=display:flex><span>+----------+---------------------------------------^----------+
</span></span><span style=display:flex><span>           |                                       |
</span></span><span style=display:flex><span>+----------+---------------------------------------+----------+
</span></span><span style=display:flex><span>|          |put              KV Engine             |Get       |
</span></span><span style=display:flex><span>|    +-----v----+                            +-----+----+     |
</span></span><span style=display:flex><span>|    | put(a,b) |                            |  Get(a)  |     |
</span></span><span style=display:flex><span>|    +-----+----+                            +-----+----+     |
</span></span><span style=display:flex><span>|          | a:b            +-------+              | a        |
</span></span><span style=display:flex><span>|    +-----v----+    +------&gt; store &lt;----+   +-----v----+     |
</span></span><span style=display:flex><span>|    |  CID(b)  +----+      +-------+    +---+ cat(hash)|     |
</span></span><span style=display:flex><span>|    +-----+----+                            +-----+----+     |
</span></span><span style=display:flex><span>|          | add(b)                                | cat      |
</span></span><span style=display:flex><span>|  --------v---------------------------------------v-----     |
</span></span><span style=display:flex><span>|           Leveldb\Badger\OSS\IPFS\CRDT\IPFS-LOG             |
</span></span><span style=display:flex><span>+-------------------------------------------------------------+
</span></span></code></pre></div><p><strong>At the above system level, IceFireDB refines and implements the following important system components.</strong></p><table><thead><tr><th>System components</th><th>describe</th><th>technology used</th></tr></thead><tbody><tr><td><strong>Network layer</strong></td><td>1. RAFT guarantees data consistency within a single availability zone.<br>2. P2P network construction decentralized database communication.<br>3. NATS is a new network layer being built.</td><td>P2P、RAFT、NATS</td></tr><tr><td><strong>Storage layer</strong></td><td>Many types of storage are currently supported. Under the codec computing layer, we abstract the KV storage driver layer, which is compatible with different storage engines of web2 and web3.</td><td>goleveldb、badger、IPFS、CRDT、IPFS-LOG、OSS</td></tr><tr><td><strong>Protocol layer</strong></td><td>Based on the codec layer, we have built a protocol layer. A good communication protocol allows more applications to easily access the IceFireDB data network. Currently, we support the Redis-RESP NoSQL protocol and the MySQL protocol.</td><td>RESP、SQL</td></tr><tr><td><strong>Codec layer</strong></td><td>The codec layer is the core of our system. For NoSQL scenarios, any data type will be abstracted into a KV storage model. With the flexible coding layer, we can build rich data operation structures and instructions, such as hash, sets, strings, etc.</td><td>KV、Strings、Hashes、Lists、Sorted Sets、Sets、SQL、PubSub</td></tr></tbody></table></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents></nav></div></aside></main></body></html>